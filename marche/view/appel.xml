<?xml version="1.0" encoding="utf-8"?>

<odoo>

    <record model="ir.ui.view" id="appel_tree_view">
            <field name="name">Enregistrement des appels d'offre</field>
            <field name="model">marche.appel</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="structure"/>
                    <field name="budget"/>
                    <field name="lieu"/>
                    <field name="date_parution"/>
                    <field name="date_limite"/>
                    <field name="dure"/>
                    <field name="state"/>

                </tree>
            </field>
    </record>


    <record model="ir.ui.view" id="appel_form_view">
            <field name="name">Enregistrement d'un appel d'offre</field>
            <field name="model">marche.appel</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button id="button_soumis" name="action_soumis" string="Soumettre" attrs ="{'invisible':[('state', 'in', ['S'])]}" class="btn-primary" type="object" groups="marche.group_category_manager"/>

                        <button id="button_obtenu" name="action_obtenu" string="Obtenu" attrs ="{'invisible':[('state', 'in', ['O','S'])]}" class="btn-primary" type="object"/>

                        <button id="button_perdu" name="action_perdu" string="Perdu" attrs ="{'invisible':[('state', 'in', ['P','S'])]}" class="btn-primary" type="object"/>

                        <field name="state" widget="statusbar"/>
                    </header>

                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="structure"/>
                            </group>
                            <group>
                                <field name="date_parution" style="width:50%"/>
                                <field name="date_limite" style="width:50%"/>
                                <field name="budget" style="width:50%"/>
                            </group>
                            <group>
                                <field name="lieu"/>
                                <field name="typ"/>
                                <field name="fiche"/>
                            </group>
                            <group>
                                <field name="num_quotidient" style="width:50%"/>
                                <field name="page" style="width:50%"/>
                                <field name="dure" style="width:50%"/>
                                <field name="num_appel" style="width:50%"/>
                            </group> 

                             <group attrs ="{'invisible':[('state', 'in', ['N','S','P'])],'required':[('state','in','O')]}">
                                <field name="orientation"/>
                                <field name="periode"/>
                                <field name="note"/>
                            </group>    
                            
                        </group>
                        <notebook>
                            <page string="Pièces à fournir">
                                <field name="dossier"/>               
                            </page>
                            <page string="Concurents" attrs ="{'invisible':[('state', 'in', ['N'])]}">
                                <field name="concuren"/>
                            </page>
                            <page string="Infos sur la soumission" attrs ="{'invisible':[('state', 'in', ['N'])]}">
                                <field name="info"/>
                            </page>

                        </notebook>
                    </sheet>
                </form>
            </field>
    </record>


    <record id="appel_view_search" model="ir.ui.view">
        <field name="name">Rechercher un marché</field>
        <field name="model">marche.appel</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="structure"/>
                <filter string="Without Authors" name="without_structure" domain="[('structure','=',False)]"/>
            </search>
        </field>
    </record>





   <!-- <record id="library_book_view_search" model="ir.ui.view">
        <field name="name">Library Book Search</field>
        <field name="model">library.book</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="author_ids"/>
                <filter string="Without Authors" name="without_author" domain="[('author_ids','=',False)]"/>
            </search>
        </field>
    </record>
    -->
    <record model="ir.actions.act_window" id="appel_action_view">
        <field name="name">Enregistrement des appels d'offre</field>
        <field name="res_model">marche.appel</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem name="GESTION MARCHE" id="enregistre_appel"/>
    <menuitem name="Données de base" id="marche" parent="enregistre_appel" action="appel_action_view"/>
    <menuitem name="Saisie/Mise à jour des marchés" id="marcheMise" parent="marche" action="appel_action_view"/>


</odoo>


